"use strict";(self.webpackChunkxresloader_docs=self.webpackChunkxresloader_docs||[]).push([[964],{3074:(e,l,n)=>{n.r(l),n.d(l,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"users/xres-code-generator/unreal","title":"Unreal / Blueprint \u8bfb\u8868\u4ee3\u7801","description":"\u4f7f\u7528 xres-code-generator \u751f\u6210 UE C++ \u4e0e\u84dd\u56fe\u53ef\u8c03\u7528\u7684\u914d\u7f6e\u8bfb\u53d6\u63a5\u53e3","source":"@site/docs/users/xres-code-generator/unreal.md","sourceDirName":"users/xres-code-generator","slug":"/users/xres-code-generator/unreal","permalink":"/docs/users/xres-code-generator/unreal","draft":false,"unlisted":false,"editUrl":"https://github.com/xresloader/xresloader-docs/edit/main/docs/users/xres-code-generator/unreal.md","tags":[],"version":"current","frontMatter":{"title":"Unreal / Blueprint \u8bfb\u8868\u4ee3\u7801","description":"\u4f7f\u7528 xres-code-generator \u751f\u6210 UE C++ \u4e0e\u84dd\u56fe\u53ef\u8c03\u7528\u7684\u914d\u7f6e\u8bfb\u53d6\u63a5\u53e3"},"sidebar":"docsSidebar","previous":{"title":"C++ \u8bfb\u8868\u4ee3\u7801","permalink":"/docs/users/xres-code-generator/cpp"},"next":{"title":"Lua \u8bfb\u8868\u4ee3\u7801\uff08C protobuf\uff09","permalink":"/docs/users/xres-code-generator/lua"}}');var t=n(7259),o=n(5739);const a={title:"Unreal / Blueprint \u8bfb\u8868\u4ee3\u7801",description:"\u4f7f\u7528 xres-code-generator \u751f\u6210 UE C++ \u4e0e\u84dd\u56fe\u53ef\u8c03\u7528\u7684\u914d\u7f6e\u8bfb\u53d6\u63a5\u53e3"},c="Unreal Engine \u96c6\u6210\u6307\u5357",i={},p=[{value:"\u751f\u6210 C++ Loader",id:"\u751f\u6210-c-loader",level:2},{value:"\u751f\u6210\u84dd\u56fe\u534f\u8bae\u7ed3\u6784\u4f53",id:"\u751f\u6210\u84dd\u56fe\u534f\u8bae\u7ed3\u6784\u4f53",level:2},{value:"\u6838\u5fc3\u63a5\u53e3",id:"\u6838\u5fc3\u63a5\u53e3",level:2},{value:"Blueprint Wrapper",id:"blueprint-wrapper",level:3},{value:"Loader UObject",id:"loader-uobject",level:3},{value:"Proto/Enum \u751f\u6210",id:"protoenum-\u751f\u6210",level:3}];function s(e){const l={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.header,{children:(0,t.jsx)(l.h1,{id:"unreal-engine-\u96c6\u6210\u6307\u5357",children:"Unreal Engine \u96c6\u6210\u6307\u5357"})}),"\n",(0,t.jsx)(l.p,{children:"\u672c\u8282\u8bf4\u660e\u5982\u4f55\u9762\u5411 UE \u9879\u76ee\u751f\u6210 C++ Loader\u3001\u84dd\u56fe\u53ef\u8c03\u7528 API \u4ee5\u53ca\u53ef\u7f16\u8f91\u7684 protobuf \u534f\u8bae\u7ed3\u6784\u3002"}),"\n",(0,t.jsx)(l.h2,{id:"\u751f\u6210-c-loader",children:"\u751f\u6210 C++ Loader"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-bash",children:'python "$REPO_DIR/xrescode-gen.py" \\\n    -i "$REPO_DIR/template" \\\n    -p "$REPO_DIR/sample/sample.pb" \\\n    -o "$REPO_DIR/sample/uepbcpp" \\\n    --set ue_include_prefix=ExcelLoader \\\n    --set ue_type_prefix=ExcelLoader \\\n    --set ue_api_definition=EXCELLOADER_API \\\n    --add-path "$REPO_DIR/template" \\\n    --set "ue_excel_loader_include_rule=ExcelLoader/%(file_path_camelname)s.h" \\\n    --set "ue_excel_group_api_include_rule=%(file_basename_without_ext)s.h" \\\n    -f "H:$REPO_DIR/template/UEExcelLoader.h.mako:ExcelLoader/\\${pb_file.get_file_path_camelname()}.h" \\\n    -f "S:$REPO_DIR/template/UEExcelLoader.cpp.mako:ExcelLoader/\\${pb_file.get_file_path_camelname()}.cpp" \\\n    -g "H:$REPO_DIR/template/UEExcelGroupApi.h.mako" \\\n    -g "S:$REPO_DIR/template/UEExcelGroupApi.cpp.mako" \\\n    "$@"\n'})}),"\n",(0,t.jsx)(l.h2,{id:"\u751f\u6210\u84dd\u56fe\u534f\u8bae\u7ed3\u6784\u4f53",children:"\u751f\u6210\u84dd\u56fe\u534f\u8bae\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-bash",children:'python "$REPO_DIR/xrescode-gen.py" \\\n    -i "$REPO_DIR/template" \\\n    -p "$REPO_DIR/sample/sample.pb" \\\n    -o "$REPO_DIR/sample/uepbcpp" \\\n    --set ue_include_prefix=ExcelLoader \\\n    --set ue_type_prefix=ExcelLoader \\\n    --set ue_bp_protocol_type_prefix=Proto \\\n    --set ue_api_definition=EXCELLOADER_API \\\n    --add-path "$REPO_DIR/template" \\\n    --set "ue_excel_loader_include_rule=ExcelLoader/%(file_path_camelname)s.h" \\\n    --set "ue_bp_protocol_include_rule=ExcelLoader/%(directory_path)s/Proto%(file_base_camelname)s.h" \\\n    --set "ue_excel_group_api_include_rule=%(file_basename_without_ext)s.h" \\\n    --set "ue_excel_enum_include_rule=ExcelEnum/%(file_basename_without_ext)s.h" \\\n    --pb-exclude-file "xrescode_extensions_v3.proto" \\\n    -f "H:$REPO_DIR/template/UEExcelLoader.h.mako:ExcelLoader/\\${pb_file.get_file_path_camelname()}.h" \\\n    -f "S:$REPO_DIR/template/UEExcelLoader.cpp.mako:ExcelLoader/\\${pb_file.get_file_path_camelname()}.cpp" \\\n    -g "H:$REPO_DIR/template/UEExcelGroupApi.h.mako" \\\n    -g "S:$REPO_DIR/template/UEExcelGroupApi.cpp.mako" \\\n    -f "H:$REPO_DIR/template/UEExcelEnum.h.mako:ExcelEnum/\\${pb_file.get_file_path_camelname()}.h" \\\n    -f "H:$REPO_DIR/template/UEBPProtocol.h.mako:ExcelLoader/\\${pb_file.get_directory_path()}/Proto\\${pb_file.get_file_base_camelname()}.h" \\\n    -f "S:$REPO_DIR/template/UEBPProtocol.cpp.mako:ExcelLoader/\\${pb_file.get_directory_path()}/Proto\\${pb_file.get_file_base_camelname()}.cpp" \\\n    "$@"\n'})}),"\n",(0,t.jsx)(l.h2,{id:"\u6838\u5fc3\u63a5\u53e3",children:"\u6838\u5fc3\u63a5\u53e3"}),"\n",(0,t.jsx)(l.h3,{id:"blueprint-wrapper",children:"Blueprint Wrapper"}),"\n",(0,t.jsxs)(l.p,{children:["\u914d\u7f6e\u7ec4\u5305\u88c5\u7c7b\u8d1f\u8d23\u628a ",(0,t.jsx)(l.code,{children:"config_group_t"})," \u66b4\u9732\u7ed9\u84dd\u56fe\u5e76\u53ef\u6309\u7d22\u5f15\u8bbf\u95ee\uff1a"]}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-cpp",children:'UCLASS(Blueprintable, BlueprintType)\nclass EXCELLOADER_API UExcelLoaderConfigGroupWrapper : public UObject {\n    GENERATED_BODY()\npublic:\n    UFUNCTION(BlueprintCallable, Category="Excel Config")\n    TArray<UExcelLoaderRoleUpgradeCfg*> GetRowRoleUpgradeCfg_AllOf_Id(int64 Id, bool& IsValid);\n\n    UFUNCTION(BlueprintCallable, Category="Excel Config")\n    UExcelLoaderRoleUpgradeCfg* GetRowRoleUpgradeCfg_Of_IdLevel(int64 Id, int64 Level, bool& IsValid);\n\n    UFUNCTION(BlueprintCallable, Category="Excel Config")\n    TArray<UExcelLoaderRoleUpgradeCfg*> GetRowRoleUpgradeCfg_AllOf_IdCosttype(int64 Id, int64 CostType, bool& IsValid);\n};\n'})}),"\n",(0,t.jsx)(l.h3,{id:"loader-uobject",children:"Loader UObject"}),"\n",(0,t.jsx)(l.p,{children:"\u6bcf\u6761\u914d\u7f6e\u4f1a\u6620\u5c04\u6210\u4e00\u4e2a UObject\uff0c\u63d0\u4f9b\u5c5e\u6027 Getter \u5e76\u7ef4\u6301\u4e0e\u5e95\u5c42 protobuf \u7684\u751f\u547d\u5468\u671f\uff1a"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-cpp",children:'UCLASS(Blueprintable, BlueprintType)\nclass EXCELLOADER_API UExcelLoaderRoleUpgradeCfg : public UObject {\n    GENERATED_BODY()\npublic:\n    UFUNCTION(BlueprintCallable, Category="Excel Config")\n    int64 GetId(bool& IsValid);\n    UFUNCTION(BlueprintCallable, Category="Excel Config")\n    int64 GetLevel(bool& IsValid);\n    UFUNCTION(BlueprintCallable, Category="Excel Config")\n    int64 GetCostValue(bool& IsValid);\n};\n'})}),"\n",(0,t.jsx)(l.h3,{id:"protoenum-\u751f\u6210",children:"Proto/Enum \u751f\u6210"}),"\n",(0,t.jsxs)(l.p,{children:["\u542f\u7528 ",(0,t.jsx)(l.code,{children:"UEBPProtocol"})," \u548c ",(0,t.jsx)(l.code,{children:"UEExcelEnum"})," \u6a21\u677f\u540e\uff0c\u8fd8\u4f1a\u5f97\u5230\uff1a"]}),"\n",(0,t.jsxs)(l.ul,{children:["\n",(0,t.jsxs)(l.li,{children:[(0,t.jsx)(l.code,{children:"UProto*"}),"\uff1a\u4ee5 UPROPERTY \u5f62\u5f0f\u66b4\u9732 protobuf \u5b57\u6bb5\uff0c\u4fbf\u4e8e\u5728\u84dd\u56fe\u4e2d\u6784\u9020\u3001\u5e8f\u5217\u5316\u6216\u8c03\u8bd5\u3002"]}),"\n",(0,t.jsxs)(l.li,{children:[(0,t.jsx)(l.code,{children:"ExcelEnum/*"}),"\uff1a\u4e3a\u6bcf\u4e2a\u679a\u4e3e\u5b9a\u4e49 ",(0,t.jsx)(l.code,{children:"UENUM(BlueprintType)"}),"\uff0c\u84dd\u56fe\u53ef\u76f4\u63a5\u9009\u62e9\u5177\u4f53\u503c\u3002"]}),"\n"]})]})}function d(e={}){const{wrapper:l}={...(0,o.R)(),...e.components};return l?(0,t.jsx)(l,{...e,children:(0,t.jsx)(s,{...e})}):s(e)}},5739:(e,l,n)=>{n.d(l,{R:()=>a,x:()=>c});var r=n(6363);const t={},o=r.createContext(t);function a(e){const l=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function c(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(o.Provider,{value:l},e.children)}}}]);