"use strict";(self.webpackChunkxresloader_docs=self.webpackChunkxresloader_docs||[]).push([[320],{3161:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/xresconv_process-11feefaea5858ce1089ec2f240b00fc9.png"},4993:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"development/design-xresconv","title":"xresconv \u8bbe\u8ba1","description":"xresconv \u67b6\u6784\u8bbe\u8ba1\u89e3\u6790","source":"@site/docs/development/design-xresconv.md","sourceDirName":"development","slug":"/development/design-xresconv","permalink":"/docs/development/design-xresconv","draft":false,"unlisted":false,"editUrl":"https://github.com/xresloader/xresloader-docs/edit/main/docs/development/design-xresconv.md","tags":[],"version":"current","frontMatter":{"title":"xresconv \u8bbe\u8ba1","description":"xresconv \u67b6\u6784\u8bbe\u8ba1\u89e3\u6790"},"sidebar":"docsSidebar","previous":{"title":"xresloader \u8bbe\u8ba1","permalink":"/docs/development/design-xresloader"},"next":{"title":"\u8bb8\u53ef\u8bc1","permalink":"/docs/about/license"}}');var s=t(7259),o=t(5739);const a={title:"xresconv \u8bbe\u8ba1",description:"xresconv \u67b6\u6784\u8bbe\u8ba1\u89e3\u6790"},c="\u6279\u91cf\u8f6c\u8868\u5de5\u5177\u8bbe\u8ba1\u6a21\u578b",i={},d=[];function l(e){const n={a:"a",code:"code",h1:"h1",header:"header",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u6279\u91cf\u8f6c\u8868\u5de5\u5177\u8bbe\u8ba1\u6a21\u578b",children:"\u6279\u91cf\u8f6c\u8868\u5de5\u5177\u8bbe\u8ba1\u6a21\u578b"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6279\u91cf\u8f6c\u8868\u5de5\u5177\u90fd\u4ee5 ",(0,s.jsx)(n.a,{href:"https://github.com/xresloader/xresconv-conf",children:"xresconv-conf"})," \u4f5c\u4e3a\u914d\u7f6e\u89c4\u8303\u3002\u5177\u4f53\u7684\u914d\u7f6e\u548c\u529f\u80fd\u70b9\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="sample/xresconv_conf.xml"',children:'<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- <?xml-stylesheet type="text/xsl" href="helper/view.xsl"?> --\x3e\n<root>\n    <include desc="\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u6587\u4ef6\u914d\u7f6e\uff0c\u7136\u540e\u672c\u6587\u4ef6\u91cc\u7684\u914d\u7f6e\u5c06\u4f1a\u8986\u76d6\u6216\u5408\u5e76\u914d\u7f6e\uff0c\u76f8\u5bf9\u4e8e\u5f53\u524dxml\u7684\u76ee\u5f55">sample.xml</include>\n    <global>\n        <work_dir desc="\u5de5\u4f5c\u76ee\u5f55\uff0c\u76f8\u5bf9\u4e8e\u5f53\u524dxml\u7684\u76ee\u5f55">../xresloader/sample</work_dir>\n        <xresloader_path desc="xresloader\u5730\u5740\uff0c\u76f8\u5bf9\u4e8e\u5f53\u524dxml\u7684\u76ee\u5f55">../target/xresloader-2.22.3.jar</xresloader_path>\n\n        <proto desc="\u534f\u8bae\u7c7b\u578b\uff0c-p\u9009\u9879">protobuf</proto>\n        <output_type desc="\u8f93\u51fa\u7c7b\u578b\uff0c-t\u9009\u9879\uff0c\u652f\u6301\u591a\u4e2a\u540c\u65f6\u914d\u7f6e\u591a\u79cd\u8f93\u51fa">bin</output_type>\n        <output_type desc="\u591a\u79cd\u8f93\u51fa\u65f6\u53ef\u4ee5\u989d\u5916\u5b9a\u4e49\u67d0\u4e2a\u8282\u70b9\u7684\u91cd\u547d\u540d\u89c4\u5219" rename="/(?i)\\.bin$/\\.json/">json</output_type>\n        <output_type desc="\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9aclass\u6765\u9650\u5236\u8f93\u51fa\u7684\u89c4\u5219" rename="/(?i)\\.bin$/\\.csv/" class="client" >ue-csv</output_type>\n        \x3c!-- output_type \u91cc\u7684class\u6807\u7b7e\u5bf9\u5e94\u4e0b\u9762item\u91cc\u7684class\u6807\u7b7e\uff0c\u5747\u53ef\u914d\u7f6e\u591a\u4e2a\uff0c\u591a\u4e2a\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u4efb\u610f\u4e00\u4e2aclass\u5339\u914d\u90fd\u4f1a\u542f\u7528\u8fd9\u4e2a\u8f93\u51fa --\x3e\n        <proto_file desc="\u534f\u8bae\u63cf\u8ff0\u6587\u4ef6\uff0c-f\u9009\u9879">proto_v3/kind.pb</proto_file>\n\n        <output_dir desc="\u8f93\u51fa\u76ee\u5f55\uff0c-o\u9009\u9879"></output_dir>\n        <data_src_dir desc="\u6570\u636e\u6e90\u76ee\u5f55\uff0c-d\u9009\u9879"></data_src_dir>\n        <data_version desc="\u6570\u636e\u7248\u672c\u53f7\uff0c\u7559\u7a7a\u5219\u81ea\u52a8\u751f\u6210">1.0.0.0</data_version>\n\n        <rename desc="\u91cd\u547d\u540d\u89c4\u5219\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a/\u641c\u7d22\u6a21\u5f0f/\u66ff\u6362\u5185\u5bb9/\uff0c\u5bf9\u5e94xresloader\u7684-n\u9009\u9879, \u5982\u679c\u5728output_type\u91cc\u8bbe\u7f6e\u4e86rename\uff0c\u4ee5output_type\u91cc\u7684rename\u4e3a\u51c6\uff0c\u5426\u5219\u4f7f\u7528\u8fd9\u91cc\u7684\u5168\u5c40\u914d\u7f6e" placeholder="/(?i)\\.bin$/\\.json/"></rename>\n\n        <java_option desc="java\u9009\u9879-\u6700\u5927\u5185\u5b58\u9650\u52362GB">-Xmx2048m</java_option>\n        <java_option desc="java\u9009\u9879-\u5ba2\u6237\u7aef\u6a21\u5f0f">-client</java_option>\n\n        <default_scheme name="KeyRow" desc="\u9ed8\u8ba4scheme\u6a21\u5f0f\u53c2\u6570-Key\u884c\u53f7">2</default_scheme>\n        <default_scheme name="MacroSource" desc="\u9ed8\u8ba4scheme\u6a21\u5f0f\u53c2\u6570-Key\u884c\u53f7">\u8d44\u6e90\u8f6c\u6362\u793a\u4f8b.xlsx|macro|2,1</default_scheme>\n    </global>\n\n    <groups desc="\u5206\u7ec4\u4fe1\u606f">\n        <group id="client" name="\u5ba2\u6237\u7aef"></group>\n        <group id="server" name="\u670d\u52a1\u5668"></group>\n    </groups>\n\n    <category desc="\u7c7b\u4fe1\u606f">\n        <tree id="all_cats" name="\u5927\u5206\u7c7b">\n            <tree id="kind" name="\u89d2\u8272\u914d\u7f6e"></tree>\n        </tree>\n        <tree id="test" name="\u6d4b\u8bd5"></tree>\n    </category>\n\n    <list>\n        <item file="\u8d44\u6e90\u8f6c\u6362\u793a\u4f8b.xlsx" scheme="scheme_kind" name="\u4eba\u7269\u8868" cat="kind" class="server"></item>\n        <item file="\u8d44\u6e90\u8f6c\u6362\u793a\u4f8b.xlsx" scheme="scheme_upgrade" name="\u5347\u7ea7\u8868" cat="kind" class="server">\n            <option desc="\u81ea\u5b9a\u4e49\u9009\u9879" name="\u79fb\u9664\u7a7a\u5217\u8868\u9879">--disable-empty-list</option>\n        </item>\n        <item name="\u5d4c\u5957\u6570\u7ec4\u6d4b\u8bd5" cat="test" class="client server">\n            <scheme name="DataSource" desc="\u6570\u636e\u6e90(\u6587\u4ef6\u540d|\u8868\u540d|\u6570\u636e\u8d77\u59cb\u884c\u53f7,\u6570\u636e\u8d77\u59cb\u5217\u53f7)">\u8d44\u6e90\u8f6c\u6362\u793a\u4f8b.xlsx|arr_in_arr|3,1</scheme>\n            <scheme name="ProtoName" desc="\u534f\u8bae\u540d">arr_in_arr_cfg</scheme>\n            <scheme name="OutputFile" desc="\u8f93\u51fa\u6587\u4ef6\u540d">arr_in_arr_cfg.bin</scheme>\n        </item>\n    </list>\n\n    <gui>\n        <set_name desc="\u8fd9\u4e2a\u811a\u672c\u7528\u4e8e\u4fee\u6539\u6811\u5f62\u8282\u70b9\u7684\u663e\u793a\u6570\u636e,\u4fbf\u4e8e\u7b56\u5212\u6838\u5bf9\u5177\u4f53\u7684\u8868\u540d">\n            if (item_data.file) {\n                item_data.name += " (" + item_data.file.match(/([^.]+)\\.\\w+$/)[1] + ")"\n            }\n        </set_name>\n        <on_before_convert type="text/javascript" timeout="15000" description="\u4e8b\u4ef6\u6267\u884c\u7ed3\u675f\u5fc5\u987b\u8c03\u7528resolve(value)\u6216reject(reason)\u51fd\u6570\uff0c\u4ee5\u89e6\u53d1\u8fdb\u884c\u4e0b\u4e00\u6b65">\n            // \u8fd9\u91cc\u53ef\u4ee5\u6267\u884cnodejs\u4ee3\u7801\uff0c\u6bd4\u5982\u4e0b\u9762\u662fWindows\u5e73\u53f0\u6267\u884c echo work_dir\n            var os = require("os");\n            var spawn = require("child_process").spawn;\n            if (os.type().substr(0, 7).toLowerCase() == "windows") {\n                var exec = spawn("cmd", ["/c", "echo " + work_dir], {\n                    cwd: work_dir,\n                    encoding: \'utf-8\'\n                });\n                exec.stdout.on("data", function(data) {\n                    log_info(data);\n                });\n                exec.stderr.on("data", function(data) {\n                    log_error(data);\n                });\n                exec.on("error", function(data) {\n                    log_error(data.toString());\n                    resolve();\n                    // reject("\u6267\u884c\u5931\u8d25" + data.toString());\n                });\n                exec.on("exit", function(code) {\n                    if (code === 0) {\n                        resolve();\n                    } else {\n                        resolve();\n                        // reject("\u6267\u884c\u5931\u8d25");\n                    }\n                });\n            } else {\n                resolve();\n            }\n        </on_before_convert>\n        <on_after_convert type="text/javascript" timeout="60000" description="\u4e8b\u4ef6\u6267\u884c\u7ed3\u675f\u5fc5\u987b\u8c03\u7528resolve(value)\u6216reject(reason)\u51fd\u6570\uff0c\u4ee5\u89e6\u53d1\u8fdb\u884c\u4e0b\u4e00\u6b65">\n            // \u540c\u4e0a\n            alert_warning("\u81ea\u5b9a\u4e49\u8f6c\u8868\u5b8c\u6210\u540e\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u6267\u884c\u4efb\u610fnodejs\u811a\u672c");\n            resolve();\n        </on_after_convert>\n        <script name="\u81ea\u5b9a\u4e49\u811a\u672c" desc="\u7528\u4e8e\u81ea\u5b9a\u4e49\u6309\u94ae" type="text/javascript">\n            // \u540c\u4e0a\n            resolve();\n        <\/script>\n    </gui>\n</root>\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u6d41\u7a0b\u5982\u4e0b:"}),"\n",(0,s.jsx)("div",{class:"diagram-panel",children:(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"image",src:t(3161).A+"",width:"1114",height:"501"})})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},5739:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var r=t(6363);const s={},o=r.createContext(s);function a(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);